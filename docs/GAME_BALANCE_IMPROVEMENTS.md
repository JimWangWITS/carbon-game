# 遊戲平衡性改進總結

## 問題分析與解決方案

### 問題 1：玩家前期優勢過大，後追機制不足

**問題根源**：
- 玩家可以一次蓋滿 5 個建築
- NPC 建造頻率低，無法跟上玩家擴張速度
- 利潤疊加導致玩家優勢滾雪球

**解決方案**：

#### 1.1 每回合建造限制
- **限制**：每回合最多建造 2 個建築
- **實現**：`GAME_CONFIG.maxBuildingsPerTurn = 2`
- **效果**：強制玩家分散決策，無法快速擴張

#### 1.2 建造次數 UI 提示
- 在底部行動區顯示「本回合建造：X/2」
- 用盡時變紅色提示
- 讓玩家清楚知道限制

#### 1.3 增強 NPC 競爭性
- **NPC A（激進擴張型）**：
  - 前期：85% 機率建造（原 50%）
  - 玩家領先時：額外 +20% 機率
- **NPC B（技術派）**：
  - 基礎 30% → 玩家領先時 60%
- **NPC C（投機商）**：
  - 基礎 40% → 玩家領先時 65%
- **動態調整**：根據玩家建築數量動態提高 NPC 建造頻率

#### 1.4 降低初始資金
- 從 50,000 → 40,000
- 增加資源壓力，限制早期擴張

#### 1.5 早期擴張懲罰
- 前 3 回合建造的建築，碳費增加 50%
- 警告提示玩家風險
- 鼓勵玩家謹慎擴張

### 問題 2：怪獸成長壓力不足

**問題根源**：
- 成長速度太慢（除數 2500）
- 沒有基礎成長（零排放時不成長）
- 缺乏累積效應

**解決方案**：

#### 2.1 加快成長速度
- 成長除數：2500 → 1800（成長速度提升 39%）
- 初始怒氣：25% → 30%

#### 2.2 基礎成長機制
- **基礎成長**：每回合固定 +2%（即使零排放）
- **模擬背景污染**：代表城市其他污染源
- **累積效應**：回合數越多，基礎成長越快（每回合 +10%）

#### 2.3 階段性加速
- **50-70%**：成長 ×1.2（中等壓力）
- **70-90%**：成長 ×1.5（狂暴狀態，原 ×1.2）
- **90-100%**：成長 ×2.0（恐慌狀態，原 ×1.5）

#### 2.4 視覺反饋增強
- 怪獸怒氣條更明顯
- 達到 70% 時顏色變紅
- 達到 90% 時閃爍警告

## 數值調整總覽

### 配置調整

```javascript
GAME_CONFIG = {
    initialMoney: 40000,          // 降低初始資金
    maxBuildingsPerTurn: 2,       // 每回合建造限制
    monsterGrowthDivisor: 1800,  // 加快成長（原 2500）
    initialMonsterAnger: 30,      // 提高初始怒氣（原 25）
    monsterBaseGrowth: 2,         // 基礎成長（新）
    earlyExpansionPenalty: true,  // 早期擴張懲罰（新）
    earlyExpansionPenaltyRate: 1.5 // 懲罰倍率 50%（新）
}
```

### 建築排放調整（已在前次調整中完成）
- 燃煤電廠：2000 → 3500 噸
- 燃氣電廠：800 → 1500 噸
- 製造業：1200 → 2000 噸

### 碳費費率調整（已在前次調整中完成）
- Lv1：300 → 500
- Lv2：100 → 200
- Lv3：50 → 100

## 預期遊戲體驗變化

### 前期（1-3 回合）
- **限制**：每回合最多 2 個建築
- **壓力**：早期擴張會增加 50% 碳費
- **選擇**：快速擴張 vs 謹慎規劃
- **NPC**：85% 機率建造，競爭激烈

### 中期（4-7 回合）
- **壓力**：怪獸開始加速成長（50%+）
- **選擇**：升級現有建築 vs 繼續擴張
- **競爭**：NPC 根據玩家進度動態調整

### 後期（8-10 回合）
- **壓力**：怪獸怒氣快速上升，基礎成長累積
- **選擇**：減碳 vs 最後衝刺
- **緊張**：70%+ 時成長 ×1.5，90%+ 時 ×2.0

## 決策點設計

### 1. 建造時機
- **問題**：現在建造還是等下一回合？
- **考量**：早期擴張懲罰、建造次數限制、資金壓力

### 2. 建築類型選擇
- **問題**：高排放高收入 vs 低排放低收入？
- **考量**：碳費成本、怪獸成長、長期收益

### 3. 升級 vs 擴張
- **問題**：升級現有建築還是建造新建築？
- **考量**：建造次數限制、資金效率、減碳效果

### 4. 碳權購買時機
- **問題**：現在買還是等價格波動？
- **考量**：資金壓力、排放預測、市場價格

## 測試建議

1. **建造限制測試**：
   - 嘗試建造第 3 個建築，應該被阻止
   - 檢查 UI 顯示是否正確

2. **NPC 競爭測試**：
   - 觀察 NPC 是否更積極建造
   - 玩家領先時，NPC 是否加速

3. **怪獸壓力測試**：
   - 觀察怪獸成長速度
   - 達到 50%、70%、90% 時是否加速

4. **早期擴張測試**：
   - 前 3 回合建造，檢查碳費是否增加 50%
   - 確認警告提示是否出現

## 後續優化建議

1. **動態難度調整**：
   - 根據玩家表現動態調整 NPC 難度
   - 玩家領先時增加挑戰

2. **更多決策點**：
   - 土地購買成本
   - 建造冷卻時間
   - 特殊事件系統

3. **視覺反饋增強**：
   - 怪獸動畫更明顯
   - 達到閾值時的視覺警告
   - 音效提示

4. **平衡微調**：
   - 根據實際測試調整數值
   - 確保挑戰性但不過於困難

